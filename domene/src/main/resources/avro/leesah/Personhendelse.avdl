@namespace("no.nav.person.pdl.leesah")
protocol PersonhendelseProto {
  import idl "doedfoedtbarn/DoedfoedtBarn.avdl";
  import idl "doedsfall/Doedsfall.avdl";
  import idl "falskidentitet/FalskIdentitet.avdl";
  import idl "foedselsdato/Foedselsdato.avdl";
  import idl "utflytting/Utflytting.avdl";

  enum Endringstype {
    OPPRETTET,
    KORRIGERT,
    ANNULLERT,
    OPPHOERT
  }

  record Personhendelse {
    string hendelseId;
    array<string> personidenter;

    string master;
    timestamp_ms opprettet;

    string opplysningstype;
    Endringstype endringstype;
    union { null, string } tidligereHendelseId = null; // Peker til tidligere hendelse ved korrigering og annullering.

    union { null, no.nav.person.pdl.leesah.doedfoedtbarn.DoedfoedtBarn } doedfoedtBarn = null;
    union { null, no.nav.person.pdl.leesah.doedsfall.Doedsfall } doedsfall = null;
    union { null, no.nav.person.pdl.leesah.falskidentitet.FalskIdentitet } falskIdentitet = null;
    union { null, no.nav.person.pdl.leesah.foedselsdato.Foedselsdato } foedselsdato = null;
    union { null, no.nav.person.pdl.leesah.utflytting.UtflyttingFraNorge } utflyttingFraNorge = null;
  }
}
